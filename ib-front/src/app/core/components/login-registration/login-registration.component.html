<body>
<div class="container" [class.sign-up-mode]="signupMode">
  <div class="forms-container">
    <div class="signin-signup">
      <form [formGroup]="loginForm" (ngSubmit)="login()" class="sign-in-form">
        <h2 class="title">Sign in</h2>

        <div class="input-field"
             [class.input-field-error]="
             loginForm.get('email')?.invalid &&
             loginForm.get('email')?.touched &&
             loginForm.get('email')?.errors?.['email']"
        >
          <i class="fas fa-user"></i>
          <input type="email" placeholder="Email" formControlName="email" required/>
          <span class="error-text"
                *ngIf="loginForm.get('email')?.invalid &&
                       loginForm.get('email')?.touched &&
                       loginForm.get('email')?.errors?.['email']"
          >
            Please enter a valid email
          </span>
        </div>
        <div class="input-field">
          <i class="fas fa-lock"></i>
          <input type="password" formControlName="password" placeholder="Password"/>
        </div>
        <re-captcha formControlName="recaptcha" siteKey="{{ siteKey }}" (resolved)="handleRecaptchaResponse($event)" reCaptchaValueAccessor></re-captcha>
        <div class="g-recaptcha" data-sitekey="{{ siteKey }}"></div>
        <button [class.btn-disabled]="!loginForm.valid" type="submit" class="btn solid">Login</button>

        <p class="social-text">Or Sign in with social platforms</p>

        <div class="social-media">
          <a href="#" class="social-icon">
            <i class="fab fa-facebook-f"></i>
          </a>

          <a href="#" class="social-icon">
            <i class="fab fa-twitter"></i>
          </a>

          <a href="#" class="social-icon">
            <i class="fab fa-google"></i>
          </a>

          <a href="#" class="social-icon">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
      </form>

      <form [formGroup]="signupForm" (ngSubmit)="register()" class="sign-up-form">
        <h2 class="title">Sign up</h2>

        <div class="input-container">
          <div class="input-field input-field-half"
               [class.input-field-error]="
               signupForm.get('name')?.invalid &&
               signupForm.get('name')?.touched &&
               signupForm.get('name')?.errors?.['pattern']"
          >
            <i class="fas fa-user"></i>
            <input type="text" formControlName="name" placeholder="Name"/>
            <span class="error-text"
                  *ngIf="signupForm.get('name')?.invalid &&
                         signupForm.get('name')?.touched&&
                         signupForm.get('name')?.errors?.['pattern']"
            >
              Wrong format
            </span>
          </div>

          <div class="input-field input-field-half"
               [class.input-field-error]="
               signupForm.get('surname')?.invalid &&
               signupForm.get('surname')?.touched &&
               signupForm.get('surname')?.errors?.['pattern']"
          >
            <i class="fas fa-user"></i>
            <input type="text" formControlName="surname" placeholder="Surname"/>
            <span class="error-text"
                  *ngIf="signupForm.get('surname')?.invalid &&
                         signupForm.get('surname')?.touched&&
                         signupForm.get('surname')?.errors?.['pattern']"
            >
              Wrong format
            </span>
          </div>
        </div>

        <div class="input-field"
             [class.input-field-error]="
               signupForm.get('phoneNumber')?.invalid &&
               signupForm.get('phoneNumber')?.touched &&
               (signupForm.get('phoneNumber')?.errors?.['minlength'] ||
                signupForm.get('phoneNumber')?.errors?.['maxlength'] ||
                signupForm.get('phoneNumber')?.errors?.['pattern'])"
        >
          <i class="fas fa-phone"></i>
          <input type="text" formControlName="phoneNumber" placeholder="Phone number"/>
          <span class="error-text"
                *ngIf=" signupForm.get('phoneNumber')?.invalid &&
                        signupForm.get('phoneNumber')?.touched &&
                       (signupForm.get('phoneNumber')?.errors?.['minlength'] ||
                        signupForm.get('phoneNumber')?.errors?.['maxlength'] ||
                        signupForm.get('phoneNumber')?.errors?.['pattern'])"
          >
              Wrong format
            </span>
        </div>

        <div class="input-field"
             [class.input-field-error]="
             signupForm.get('email')?.invalid &&
             signupForm.get('email')?.touched &&
             signupForm.get('email')?.errors?.['email']"
        >
          <i class="fas fa-envelope"></i>
          <input type="email" formControlName="email" placeholder="Email"/>
          <span class="error-text"
                *ngIf="signupForm.get('email')?.invalid &&
                       signupForm.get('email')?.touched &&
                       signupForm.get('email')?.errors?.['email']"
          >
            Please enter a valid email
          </span>
        </div>

        <div class="confirmation-method">
          <span>Confirmation:</span>
          <input type="radio" name="confirmationMethod" id="sms" formControlName="confirmationMethod" value="sms" checked="checked">
          <label for="sms">SMS</label>

          <input type="radio" name="confirmationMethod" id="email" formControlName="confirmationMethod" value="email">
          <label for="email">EMAIL</label>
        </div>

        <div class="input-field">
          <i class="fas fa-lock"></i>
          <input type="password" formControlName="password" placeholder="Password"/>
        </div>

        <div class="input-field"
             [class.input-field-error]="
             signupForm.get('confirmPassword')?.invalid &&
             signupForm.get('confirmPassword')?.touched &&
             signupForm.get('confirmPassword')?.errors?.['matching']"
        >
          <i class="fas fa-lock"></i>
          <input type="password" formControlName="confirmPassword" placeholder="Repeat password"/>
          <span class="error-text"
                *ngIf="signupForm.get('confirmPassword')?.invalid &&
                       signupForm.get('confirmPassword')?.touched &&
                       signupForm.get('confirmPassword')?.errors?.['matching']"
          >
            Passwords do not match
          </span>
        </div>

        <button [class.btn-disabled]="!signupForm.valid" type="submit" class="btn solid">SIGN UP</button>
      </form>
    </div>
  </div>

  <div class="panels-container">
    <div class="panel left-panel">
      <div class="content">
        <h3>New here ?</h3>
        <p>
          Create an account to get started. It's quick and easy. Once you're done, you can log in and start exploring
          our platform!
        </p>
        <button (click)="signupMode = !signupMode" class="btn transparent" id="sign-up-btn">
          Sign up
        </button>
      </div>
      <img ngSrc="assets/images/log.svg" width="530" height="200" class="image" alt=""/>
    </div>
    <div class="panel right-panel">
      <div class="content">
        <h3>One of us ?</h3>
        <p>
          If so, we're glad to have you back! You can proceed to log in using your registered email and password.
        </p>
        <button (click)="signupMode = !signupMode" class="btn transparent" id="sign-in-btn">
          Sign in
        </button>
      </div>
      <img ngSrc="assets/images/register.svg" width="530" height="200" class="image" alt=""/>
    </div>
  </div>
</div>
</body>
