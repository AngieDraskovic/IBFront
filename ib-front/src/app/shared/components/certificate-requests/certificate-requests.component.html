<main>
  <div class="head-title">
    <div class="left">
      <h1>Certificate requests</h1>
      <ul class="breadcrumb">
        <li>
          <a href="#">Certificate requests</a>
        </li>
        <li><i class='fa fa-regular fa-chevron-right'></i></li>
        <li>
          <a class="active" href="#">Home</a>
        </li>
      </ul>
    </div>
    <a (click)="openCreateRequestDialog()" class="btn-download">
      <i class='fa fa-solid fa-plus-circle'></i> &nbsp;
      <span class="text">

        Create Request
      </span>
    </a>
  </div>

  <ul class="box-info">
    <li>
      <i class='fa fa-solid fa-circle-question'></i>
      <span class="text">
						<h3>{{numberOfRequests}}</h3>
						<p>Requests</p>
					</span>
    </li>
    <li>
      <i class='fa fa-solid fa-circle-check'></i>
      <span class="text">
						<h3>{{numberOfAcceptedRequests}}</h3>
						<p>Approved</p>
					</span>
    </li>
    <li>
      <i class='fa fa-solid fa-circle-xmark'></i>
      <span class="text">
						<h3>{{numberOfRejectedRequests}}</h3>
						<p>Rejected</p>
					</span>
    </li>
  </ul>

  <div class="table-data">
    <div class="order">
      <div class="head">
        <h3>Outgoing requests</h3>
        <i class='bx bx-search'></i>
        <i class='bx bx-filter'></i>
      </div>
      <table>
        <thead>
        <tr>
          <th>Issuer email</th>
          <th>Issuer SN</th>
          <th>Valid To</th>
          <th>Status</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let request of outgoingRequests">
          <td>
            <img ngSrc="assets/images/profile.png" width="60" height="40" alt="">
            <p>{{request.issuerUsername }}</p>
          </td>
          <td>{{request.issuerSN}}</td>
          <td>{{ request.validTo | date:'dd-MM-yyyy' }}</td>
          <td><span class="status {{ request.status.toLowerCase() }}">{{request.status}}</span></td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="table-data">
    <div class="order">
      <div class="head">
        <h3>Incoming requests</h3>
        <i class='bx bx-search'></i>
        <i class='bx bx-filter'></i>
      </div>
      <table>
        <thead>
        <tr>
          <th>Owner</th>
          <th>Issuer SN</th>
          <th>Valid To</th>
          <th class="button"></th>
          <th class="button"></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let request of incomingRequests">
          <td>
            <img ngSrc="assets/images/profile.png" width="60" height="40" alt="">
            <p>{{request.subjectUsername }}</p>
          </td>
          <td>{{request.issuerSN}}</td>
          <td>{{ request.validTo | date:'dd-MM-yyyy' }}</td>
          <td>
            <i class='approve-button fa-solid fa-circle-check'
               (click)="approveRequest(request.id)">

            </i>
          </td>
          <td>
            <i class='reject-button fa-solid fa-circle-xmark'
               (click)="rejectRequest(request.id)"
            >

            </i>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>
